---
# Task Descriptor: SPEC-TERM-001 Task 2b - Refactor TemplateManager → TemplateRenderer
id: "2026-02-11T1100-specterm001-task2b-template-renderer"
title: "SPEC-TERM-001 Task 2b: Refactor TemplateManager → TemplateRenderer"
assignee: backend-dev
batch: "SPEC-TERM-001"
priority: HIGH
status: assigned
created: "2026-02-11T11:00:00Z"
specification: "specifications/initiatives/terminology-alignment-refactoring.md"
related_decisions:
  - "specifications/initiatives/terminology-alignment-refactoring.md"
dependencies:
  - type: prerequisite
    task_id: "2026-02-11T1100-specterm001-task2a-model-router"
    description: "ModelRouter refactoring establishes pattern"
blocks:
  - "2026-02-11T1100-specterm001-task2c-task-assigner"
estimated_hours: 6
tags:
  - spec-term-001
  - refactoring
  - template-renderer
  - terminology-alignment
---

# Task: Refactor TemplateManager → TemplateRenderer

## Context

**Initiative:** SPEC-TERM-001 - Terminology Alignment Refactoring  
**Batch:** Phase 2 - Core Component Refactoring  
**Strategic Goal:** Rename class to reflect rendering responsibility with domain-driven terminology

**Why This Matters:**
- "Manager" is generic suffix adding no domain value
- "Renderer" accurately reflects responsibility (rendering templates)
- Follows pattern established in Task 2a (ModelRouter)
- Aligns with domain glossary
- Reduces conceptual drift

## Objective

Rename `TemplateManager` to `TemplateRenderer` and update all references. Refactor methods to use domain language (manage → render). Update tests, documentation, and imports across codebase.

## Acceptance Criteria

**MUST:**
- [ ] Class renamed from `TemplateManager` to `TemplateRenderer`
- [ ] Methods reflect rendering operations (render, apply, populate)
- [ ] All imports updated across codebase
- [ ] Tests updated (class name, method names)
- [ ] Documentation updated
- [ ] Glossary entry added
- [ ] All tests pass (no regressions)

**SHOULD:**
- [ ] Method signatures improved for clarity
- [ ] Error messages use rendering terminology
- [ ] Logging statements updated

**MUST NOT:**
- [ ] Change template rendering logic (behavior unchanged)
- [ ] Break template API contracts
- [ ] Introduce new features

## Deliverables

1. **Refactored Code:**
   - `src/{path}/template_renderer.py` (renamed)
   - Updated method names
   - Updated docstrings

2. **Updated Tests:**
   - `tests/unit/{path}/test_template_renderer.py` (renamed)
   - All test cases updated

3. **Updated Documentation:**
   - Docstrings updated
   - README/guides updated (if referenced)

4. **Glossary Entry:**
   - `docs/glossary.md` - Add "TemplateRenderer"

5. **Migration Log:**
   - `work/refactoring/specterm001-task2b-log.md`

## Test Plan

**Validation Strategy:**
1. Baseline tests before refactoring
2. Rename class and file
3. Update test names
4. Update imports
5. Run full test suite
6. Spot-check template rendering paths

**Test Commands:**
```bash
# Baseline
pytest tests/unit/{path}/test_template_manager.py -v

# After refactoring
pytest tests/unit/{path}/test_template_renderer.py -v

# Full suite
pytest tests/ -v

# Type checking
mypy src/ --strict
```

## Implementation Notes

### Renaming Strategy

**Step 1: Rename Class and File**
```bash
git mv src/{path}/template_manager.py src/{path}/template_renderer.py
```

**Step 2: Update Class and Methods**
```python
# BEFORE
class TemplateManager:
    def manage_template(self, template_name: str):
        """Manage template processing."""
        pass
    
    def apply_template(self, template: str, data: dict):
        """Apply template with data."""
        pass

# AFTER
class TemplateRenderer:
    """Renders templates with provided data.
    
    Responsibilities:
    - Render templates using template engine
    - Populate templates with context data
    - Apply formatting and validation
    """
    
    def render(self, template_name: str, context: dict):
        """Render template with given context.
        
        Args:
            template_name: Name of template to render
            context: Data to populate template
        
        Returns:
            Rendered template string
        """
        pass
    
    def render_string(self, template_str: str, context: dict):
        """Render template string directly (no file load)."""
        pass
```

**Step 3: Update Imports**
```bash
# Find references
grep -r "TemplateManager" src/ tests/ docs/

# Update imports
# OLD: from src.{path}.template_manager import TemplateManager
# NEW: from src.{path}.template_renderer import TemplateRenderer
```

### Glossary Entry

```markdown
## TemplateRenderer

**Domain:** Template Processing  
**Definition:** Component responsible for rendering templates with provided context data.

**Responsibilities:**
- Render templates using template engine (Jinja2, etc.)
- Populate templates with context data
- Apply formatting rules
- Validate rendered output (if applicable)

**Anti-Pattern:** TemplateManager (generic "manager" suffix)

**Example Usage:**
```python
renderer = TemplateRenderer()
output = renderer.render("agent_profile.md", context={
    "agent_name": "Backend Dev",
    "specialization": "Python development"
})
```

**Related Terms:**
- Template (the template definition)
- Context (data for rendering)

**Related ADRs:** SPEC-TERM-001
```

### Migration Log Template

```markdown
# SPEC-TERM-001 Task 2b: TemplateRenderer Refactoring Log

**Date:** 2026-02-11  
**Agent:** Backend Dev  
**Objective:** Rename TemplateManager → TemplateRenderer

## Files Changed

### Renamed Files
- `src/{path}/template_manager.py` → `src/{path}/template_renderer.py`
- `tests/unit/{path}/test_template_manager.py` → `tests/unit/{path}/test_template_renderer.py`

### Updated Files (Imports)
(List all files with import updates)

## Methods Renamed

- `manage_template()` → `render()`
- `apply_template()` → `render_string()`
- `get_template()` → `load_template()` (for clarity)

## Validation Results

- **Tests Before:** PASS (X/X)
- **Tests After:** PASS (X/X)
- **Type Checking:** PASS (0 errors)
- **Rendering Behavior:** Unchanged (validated)

## Completion

✅ Class renamed  
✅ Methods renamed  
✅ Tests updated  
✅ Documentation updated  
✅ Glossary entry added  
✅ Task 2c unblocked
```

## Risk Assessment

**RISK:** Medium (breaking changes, but isolated component)

**Mitigation:**
- Follow pattern from Task 2a (ModelRouter)
- Git history preserved
- Tests validate behavior
- Incremental updates
- Type checking validation

## Definition of Done

- [ ] Class renamed TemplateRenderer
- [ ] File renamed template_renderer.py
- [ ] Methods reflect rendering operations
- [ ] All imports updated
- [ ] Tests pass (100%)
- [ ] Type checking passes
- [ ] Documentation updated
- [ ] Glossary entry added
- [ ] Migration log created
- [ ] Task 2c unblocked

## References

- **Specification:** `specifications/initiatives/terminology-alignment-refactoring.md`
- **Pattern Reference:** Task 2a (ModelRouter refactoring)
- **Glossary:** `docs/glossary.md`

---

**Estimated Effort:** 6 hours  
**Agent:** Backend Dev  
**Batch:** SPEC-TERM-001 Phase 2  
**Priority:** ⭐⭐⭐⭐ HIGH (continues refactoring momentum)
