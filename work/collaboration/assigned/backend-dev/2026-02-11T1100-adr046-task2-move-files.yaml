---
# Task Descriptor: ADR-046 Task 2 - Move Files to Bounded Contexts
id: "2026-02-11T1100-adr046-task2-move-files"
title: "ADR-046 Task 2: Move Files to Bounded Contexts"
assignee: backend-dev
batch: "M5.1"
priority: CRITICAL
status: assigned
created: "2026-02-11T11:00:00Z"
specification: "docs/architecture/adrs/ADR-046-domain-module-refactoring.md"
related_decisions:
  - "docs/architecture/adrs/ADR-046-domain-module-refactoring.md"
  - "docs/architecture/adrs/ADR-045-doctrine-concept-domain-model.md"
dependencies:
  - type: prerequisite
    task_id: "2026-02-11T0900-adr046-task1-domain-structure"
    description: "Domain directory structure must exist before moving files"
blocks:
  - "2026-02-11T1100-adr046-task3-update-imports"
estimated_hours: 2-3
tags:
  - adr-046
  - domain-refactoring
  - file-migration
  - bounded-contexts
---

# Task: Move Files to Bounded Contexts

## Context

**Initiative:** M5 Batch 5.1 - Conceptual Alignment Foundation  
**ADR:** ADR-046 (Domain Module Refactoring)  
**Strategic Goal:** Migrate existing domain files from src/common/ to bounded context modules

**Why This Matters:**
- Physically separates domain concepts into bounded contexts
- Reduces confusion from polysemous terms (task means different things in different contexts)
- Enables context-specific evolution of domain models
- Foundation for ADR-045 doctrine domain model implementation

## Objective

Move existing domain files from `src/common/` to appropriate bounded context directories (collaboration/, doctrine/, specifications/) while preserving Git history.

## Acceptance Criteria

**MUST:**
- [ ] Move Task/TaskAggregate files to `src/domain/collaboration/`
- [ ] Move Directive/Approach files to `src/domain/doctrine/`
- [ ] Move Specification files to `src/domain/specifications/`
- [ ] Move truly shared utilities only to `src/domain/common/`
- [ ] Use `git mv` to preserve file history
- [ ] Commit each bounded context move separately (3 commits minimum)
- [ ] Preserve existing `src/common/` with clear deprecation notice

**SHOULD:**
- [ ] Add deprecation comments to old `src/common/` files pointing to new locations
- [ ] Document file mappings in commit messages
- [ ] Create migration guide for team reference

**MUST NOT:**
- [ ] Update imports yet (Task 3 handles this - breaking changes expected temporarily)
- [ ] Delete original `src/common/` directory
- [ ] Modify file contents during move

## Deliverables

1. **File Migrations:**
   - `src/common/task_schema.py` → `src/domain/collaboration/task_schema.py`
   - `src/common/agent_loader.py` → `src/domain/doctrine/agent_loader.py`
   - Generic utilities → `src/domain/common/`

2. **Git Commits:**
   - Commit 1: Move collaboration domain files
   - Commit 2: Move doctrine domain files
   - Commit 3: Move specifications domain files
   - Commit 4: Move shared utilities

3. **Documentation:**
   - `src/common/MIGRATION_GUIDE.md` - File mapping reference
   - Deprecation notices in moved files

## Test Plan

**Verification Steps:**
1. Verify `git log --follow <file>` shows preserved history
2. Confirm files exist in new locations
3. Verify `src/common/` contains only deprecation notices
4. **EXPECT:** Import errors (temporarily broken, fixed in Task 3)
5. **DO NOT RUN:** Full test suite (will fail, expected)

**Test Commands:**
```bash
# Verify file moves preserved history
git log --follow src/domain/collaboration/task_schema.py

# Verify new structure
tree src/domain/

# Check deprecation notices
cat src/common/README.md
```

## Implementation Notes

### File Mapping Strategy

**To collaboration/ (agent orchestration context):**
- `task_schema.py` - Task domain model
- `task_descriptor.py` - Task metadata
- `orchestrator.py` - Multi-agent coordination
- Related task management utilities

**To doctrine/ (framework governance context):**
- `agent_loader.py` - Agent profile parsing
- `directive_parser.py` - Directive parsing
- `approach_parser.py` - Approach parsing
- Related doctrine utilities

**To specifications/ (product planning context):**
- `spec_parser.py` - Specification parsing (if exists)
- `initiative_tracker.py` - Initiative tracking (if exists)
- Related portfolio utilities

**To common/ (truly shared utilities):**
- Generic validators (no domain semantics)
- Generic parsers (no domain knowledge)
- File system utilities
- Generic types/enums

### Git Commands Reference

```bash
# Move collaboration files
git mv src/common/task_schema.py src/domain/collaboration/
git mv src/common/orchestrator.py src/domain/collaboration/
git commit -m "refactor(domain): Move collaboration files to bounded context

ADR-046 Task 2 - Move collaboration domain files
Files moved:
- task_schema.py → collaboration/
- orchestrator.py → collaboration/

BREAKING CHANGE: Imports temporarily broken, fixed in Task 3"

# Repeat for doctrine, specifications, common
```

### Deprecation Notice Template

Add to moved files in `src/common/`:
```python
"""
DEPRECATED: This file has moved to src/domain/{context}/{filename}

This location is preserved for backwards compatibility during migration.
Import from new location:
    from src.domain.{context}.{module} import {class}

Migration: ADR-046 Task 2
See: src/common/MIGRATION_GUIDE.md
"""
```

## Risk Assessment

**RISK:** High (breaking changes expected temporarily)

**Mitigation:**
- Use `git mv` to preserve history (easy to revert)
- Commit each context separately (granular rollback)
- Deprecation notices provide migration path
- Task 3 immediately follows to fix imports
- Coordinate with team during low-activity window

**Communication:**
- Notify team BEFORE starting
- Post migration guide reference
- Notify team AFTER completion (imports broken until Task 3)

## Definition of Done

- [ ] All domain files moved to appropriate bounded contexts
- [ ] Git history preserved (`git log --follow` works)
- [ ] Migration commits cleanly separated by context
- [ ] `src/common/MIGRATION_GUIDE.md` created
- [ ] Deprecation notices added
- [ ] Team notified of temporary breakage
- [ ] Task 3 ready to execute (import updates)
- [ ] Alphonso notified for checkpoint review

## References

- **ADR:** `docs/architecture/adrs/ADR-046-domain-module-refactoring.md`
- **Related:** `docs/architecture/adrs/ADR-045-doctrine-concept-domain-model.md`
- **Planning:** `docs/planning/NEXT_BATCH.md` (M5.1)

---

**Estimated Effort:** 2-3 hours  
**Agent:** Backend Dev  
**Batch:** M5 Batch 5.1 - Conceptual Alignment Foundation  
**Priority:** ⭐⭐⭐⭐⭐ CRITICAL (blocks Task 3 import updates)
