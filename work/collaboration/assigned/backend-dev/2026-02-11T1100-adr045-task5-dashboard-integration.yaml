---
# Task Descriptor: ADR-045 Task 5 - Dashboard Integration (Portfolio View Only)
id: "2026-02-11T1100-adr045-task5-dashboard-integration"
title: "ADR-045 Task 5: Dashboard Integration (Portfolio View Only)"
assignee: backend-dev
batch: "M5.1"
priority: MEDIUM
status: assigned
created: "2026-02-11T11:00:00Z"
specification: "docs/architecture/adrs/ADR-045-doctrine-concept-domain-model.md"
related_decisions:
  - "docs/architecture/adrs/ADR-045-doctrine-concept-domain-model.md"
  - "docs/architecture/adrs/ADR-046-domain-module-refactoring.md"
dependencies:
  - type: prerequisite
    task_id: "2026-02-11T1100-adr045-task4-validators"
    description: "Validation must be complete before dashboard integration"
blocks: []
estimated_hours: 2-4
tags:
  - adr-045
  - dashboard
  - portfolio-view
  - scope-limited
  - checkpoint-final
---

# Task: Dashboard Integration (Portfolio View Only)

## Context

**Initiative:** M5 Batch 5.1 - Conceptual Alignment Foundation  
**ADR:** ADR-045 (Doctrine Concept Domain Model)  
**Strategic Goal:** Integrate doctrine domain model with dashboard portfolio view ONLY

**Why This Matters:**
- Portfolio view is highest priority for team visibility
- Limited scope reduces M5.1 execution risk
- Demonstrates value of domain model integration
- Other dashboard views deferred to future batches
- Final checkpoint for M5.1 completion

**SCOPE CONSTRAINT:**
- ✅ Portfolio view integration
- ❌ Agent status view (deferred)
- ❌ Directive compliance view (deferred)
- ❌ Task management view (deferred)

## Objective

Integrate doctrine domain model with dashboard portfolio view. Display agents with capabilities and directive compliance. Limit scope to portfolio view only to reduce complexity and risk.

## Acceptance Criteria

**MUST:**
- [ ] Portfolio view uses Agent domain objects (not raw YAML)
- [ ] List all agents with capabilities
- [ ] Display directive compliance per agent
- [ ] SCOPE LIMITED: Portfolio view only (no other views)
- [ ] Tests pass for portfolio view integration
- [ ] ADR-045 marked as IMPLEMENTED
- [ ] Alphonso notified for final checkpoint (M5.1 complete)

**SHOULD:**
- [ ] Agent specialization displayed
- [ ] Capability categories shown (primary, secondary, avoid)
- [ ] Directive compliance percentage calculated
- [ ] Link to agent profile source file

**MUST NOT:**
- [ ] Integrate with other dashboard views (task management, agent status)
- [ ] Modify dashboard UI beyond portfolio view
- [ ] Add new features outside scope

## Deliverables

1. **Portfolio View Integration:**
   - Update `src/dashboard/views/portfolio_view.py` (use domain objects)
   - Remove raw YAML loading (replace with domain model)
   - Add capability display logic

2. **Tests:**
   - `tests/unit/dashboard/test_portfolio_view.py` - Unit tests
   - `tests/integration/dashboard/test_portfolio_integration.py` - Integration tests

3. **Documentation:**
   - Update `docs/dashboard/portfolio-view.md`
   - Document domain model usage

4. **Final Checkpoint:**
   - `work/coordination/adr045-final-checkpoint.md`
   - Summary for Alphonso
   - M5.1 completion status

## Test Plan

**Test Coverage:**
- [ ] Portfolio view loads agents from domain model
- [ ] Capabilities displayed correctly
- [ ] Directive compliance calculated
- [ ] Source file links functional
- [ ] No regressions in other dashboard views

**Test Commands:**
```bash
# Unit tests
pytest tests/unit/dashboard/test_portfolio_view.py -v

# Integration test (load real agents)
pytest tests/integration/dashboard/test_portfolio_integration.py -v

# Manual verification
python run_dashboard.py
# Navigate to Portfolio view
# Verify agents display with capabilities
```

## Implementation Notes

### Portfolio View Update

```python
# src/dashboard/views/portfolio_view.py (update)

from src.domain.doctrine.parsers import AgentParser
from src.domain.doctrine.validators import CrossReferenceValidator
from pathlib import Path

class PortfolioView:
    """Portfolio view showing agent capabilities."""
    
    def __init__(self):
        """Initialize portfolio view with domain model."""
        self.agents = self._load_agents()
    
    def _load_agents(self):
        """Load agents using domain model."""
        agents_dir = Path(".github/agents")
        agent_files = list(agents_dir.glob("*.agent.md"))
        
        parser = AgentParser()
        agents = []
        
        for file_path in agent_files:
            try:
                agent = parser.parse(file_path)
                agents.append(agent)
            except Exception as e:
                # Log error, continue loading other agents
                print(f"Failed to load {file_path}: {e}")
        
        return agents
    
    def render(self):
        """Render portfolio view."""
        # Display agents with capabilities
        for agent in self.agents:
            print(f"## {agent.name} ({agent.id})")
            print(f"Specialization: {agent.specialization}")
            
            # Display capabilities
            if agent.capability_descriptions:
                print("\nCapabilities:")
                for category, description in agent.capability_descriptions.items():
                    print(f"  - {category.capitalize()}: {description}")
            
            # Display directive compliance
            compliance = self._calculate_compliance(agent)
            print(f"\nDirective Compliance: {compliance:.0%}")
            print(f"Source: {agent.source_file}")
            print()
    
    def _calculate_compliance(self, agent):
        """Calculate directive compliance percentage."""
        # Placeholder: Assume all required directives exist
        # Real implementation would cross-reference with DirectiveParser
        return 1.0  # 100% compliance
```

### Scope Limitation Enforcement

**What to integrate:**
- ✅ Agent loading from domain model
- ✅ Capability display
- ✅ Directive compliance calculation
- ✅ Source file traceability

**What NOT to integrate (deferred):**
- ❌ Task status view (keep existing implementation)
- ❌ Agent status view (keep existing implementation)
- ❌ Directive compliance dashboard (future feature)
- ❌ Workflow orchestration view (future feature)

### Final Checkpoint Template

```markdown
# ADR-045 Final Checkpoint - M5.1 Complete

**To:** Architect Alphonso  
**From:** Backend Dev  
**Date:** 2026-02-11  
**Subject:** M5.1 Batch Complete - Final Checkpoint Review

## Summary

ADR-045 implementation complete. Domain model integrated with dashboard portfolio view (scope-limited). Requesting final checkpoint approval for M5.1 completion.

## Implementation Results

### ADR-046 (Domain Refactoring)
✅ Task 1: Domain structure created
✅ Task 2: Files moved to bounded contexts
✅ Task 3: Imports updated (~50 files)
✅ Task 4: Tests passing, documentation updated

### ADR-045 (Domain Model)
✅ Task 1: 6 doctrine domain models created
✅ Task 2: Parsers implemented (4 types)
✅ Task 3: Agent parser enhanced (capabilities, primers)
✅ Task 4: Validators and comprehensive tests (≥90% coverage)
✅ Task 5: Portfolio view integration (scope-limited)

## Test Results

- **Unit Tests:** PASS (428/428)
- **Integration Tests:** PASS (67/67)
- **Test Coverage:** 91% (target: ≥90%)
- **Type Checking:** PASS (mypy strict)
- **Performance:** 387ms to load 20 agents (target: <500ms)

## Scope Limitations Respected

✅ Portfolio view only (as planned)
✅ Other dashboard views deferred (no scope creep)
✅ Domain model foundation complete
✅ Ready for future integrations (M5.2+)

## Risks Mitigated

- Phased execution prevented breaking changes
- Checkpoint reviews caught issues early
- Test coverage ensured quality
- Performance benchmarks validated scalability

## Next Steps (Post-M5.1)

**If APPROVED:**
- M5.1 marked COMPLETE
- Begin SPEC-TERM-001 execution (2026-02-18)
- Planning Petra notified for M5.2 planning

**If CHANGES REQUESTED:**
- Address feedback
- Re-submit for approval

## Decision Request

**M5.1 Batch Complete - Approval to Proceed?**

_Awaiting final checkpoint approval..._
```

## Risk Assessment

**RISK:** Low (limited scope, portfolio view only)

**Mitigation:**
- Scope strictly limited (no feature creep)
- Other views unchanged (no regressions)
- Integration tests validate functionality
- Alphonso checkpoint before declaring complete

## Definition of Done

- [ ] Portfolio view uses domain objects (not raw YAML)
- [ ] Agents displayed with capabilities
- [ ] Directive compliance shown
- [ ] Scope limited to portfolio view (verified)
- [ ] Tests pass (unit, integration)
- [ ] ADR-045 marked IMPLEMENTED
- [ ] M5.1 declared COMPLETE
- [ ] Final checkpoint submitted to Alphonso
- [ ] **Alphonso approval received for M5.1 completion**

## References

- **ADR:** `docs/architecture/adrs/ADR-045-doctrine-concept-domain-model.md`
- **Related:** `docs/architecture/adrs/ADR-046-domain-module-refactoring.md`
- **Planning:** `docs/planning/NEXT_BATCH.md` (M5.1)

---

**Estimated Effort:** 2-4 hours  
**Agent:** Backend Dev  
**Batch:** M5 Batch 5.1 - Conceptual Alignment Foundation  
**Priority:** ⭐⭐⭐ MEDIUM (scope-limited integration)  
**Checkpoint:** ✋ FINAL (Architect Alphonso approval for M5.1 completion)
