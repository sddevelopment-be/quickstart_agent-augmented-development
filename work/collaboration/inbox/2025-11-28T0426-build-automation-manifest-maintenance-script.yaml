id: 2025-11-28T0426-build-automation-manifest-maintenance-script
agent: build-automation
status: new
priority: medium
mode: /programming
title: Create script to keep directives manifest.json up to date

description: |
  Create an automated script that maintains the directives manifest.json file
  by scanning the directives directory and ensuring all directive files are
  properly registered with correct metadata.
  
  The script should:
  - Scan .github/agents/directives/ for numbered directive files
  - Validate that each directive has a manifest entry
  - Check for missing directives in manifest
  - Validate metadata consistency (file name, code, slug match)
  - Report discrepancies
  - Optionally auto-update manifest (with dry-run mode)

artefacts:
  - ops/scripts/maintenance/update_directives_manifest.py
  - ops/scripts/maintenance/README.md (update if exists)
  - tests for the script (following directives 016, 017)

context:
  repo: sddevelopment-be/quickstart_agent-augmented-development
  branch: copilot/create-condensed-locality-directive
  related_pr: Create condensed Locality of Change directive (020)
  notes:
    - Follow directives 016 (ATDD), 017 (TDD), 018 (Traceable Decisions), 014 (Work Logs)
    - Use Python for implementation
    - Script should be runnable as standalone and in CI
    - Include comprehensive error messages
    - Add --dry-run and --fix flags
    - Document usage in script docstring
  
requirements:
  - Scan .github/agents/directives/ directory
  - Parse manifest.json for existing entries
  - Validate directive files match manifest entries
  - Check for orphaned manifest entries (file doesn't exist)
  - Check for unregistered directives (file exists, no manifest entry)
  - Validate metadata consistency (code number in filename matches manifest code)
  - Report all discrepancies with clear messaging
  - Provide --dry-run mode (report only, no changes)
  - Provide --fix mode (auto-update manifest)
  - Exit with non-zero code if discrepancies found (for CI usage)

testing_requirements:
  - Write acceptance tests first (directive 016)
  - Test discovery of new directives
  - Test detection of missing manifest entries
  - Test detection of orphaned entries
  - Test metadata validation
  - Test dry-run mode
  - Test fix mode
  - Follow TDD cycles for implementation (directive 017)

dependencies: []

created_at: '2025-11-28T04:26:00Z'
created_by: curator-claire
origin_comment_id: 2570425327
