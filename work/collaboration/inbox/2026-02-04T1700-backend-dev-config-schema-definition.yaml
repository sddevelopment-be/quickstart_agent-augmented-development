id: 2026-02-04T1700-backend-dev-config-schema-definition
agent: backend-dev
status: new
title: "Define YAML configuration schemas for LLM service layer"
artefacts:
  - src/llm_service/config/schemas.py  # or schemas.js for Node.js
  - config/agents.yaml.example
  - config/tools.yaml.example
  - config/models.yaml.example
  - config/policies.yaml.example
context:
  project: "LLM Service Layer"
  architecture_ref: "docs/architecture/design/llm-service-layer-prestudy.md"
  milestone: "Milestone 1: Foundation"
  batch: "Batch 1.1: Configuration Schema & Validation"
  tech_stack_decision: "Python or Node.js (to be decided)"
  notes:
    - "Define Pydantic models (Python) or JSON Schema (Node.js) for configuration validation"
    - "Ensure all approved decisions reflected: Python/Node.js, YAML format, configurable limit.type"
    - "Reference configuration examples from prestudy (sections: 'Agent Registry', 'Tool Definitions', 'Model Catalog', 'Policy Rules')"
    - "Support platform-specific binary paths in tools.yaml"
    - "Validate cross-references: agent.preferred_tool must exist in tools.yaml, agent.preferred_model must exist in models.yaml"
acceptance_criteria:
  - "Schemas enforce required fields (id, agent, status for agents; binary, command_template for tools)"
  - "Validation catches invalid references (unknown tool/model names)"
  - "Example YAML files demonstrate MVP configuration (claude-code + codex tools)"
  - "Schema supports configurable budget enforcement (limit.type: soft|hard)"
  - "Unit tests verify schema validation logic"
dependencies:
  - "Tech stack decision (Python vs. Node.js) must be made first"
estimated_effort: "3-4 days"
priority: "high"
created_at: "2026-02-04T17:00:00Z"
created_by: "planning-petra"
